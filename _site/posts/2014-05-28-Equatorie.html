<!DOCTYPE html>
<!--
                      __  .__              ________ 
  ______ ____   _____/  |_|__| ____   ____/   __   \
 /  ___// __ \_/ ___\   __\  |/  _ \ /    \____    /
 \___ \\  ___/\  \___|  | |  (  <_> )   |  \ /    / 
/____  >\___  >\___  >__| |__|\____/|___|  //____/ .co.uk 
     \/     \/     \/                    \/        
   -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-gb" class="skrollr skrollr-desktop">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>The Equatorie</title>
    <meta name="author" content="Benjamin Blundell" />
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Section9 ATOM Feed">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link href="/css/bootstrap.css" rel="stylesheet">
    <link href="/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/css/s9.css" rel="stylesheet" media="screen">
    <link href="/css/font-awesome.min.css" rel="stylesheet" media="screen">


    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/s9-144.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/s9-114.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/s9-72.png">
    <link rel="apple-touch-icon-precomposed" href="/images/s9-57.png">
    <link rel="shortcut icon" href="/images/favicon.ico">

    <!-- META DATA - Need to Check and Update -->
    <meta name="google-site-verification" content="Ew7bGq_-B5Djz3nNvxYt6abpW2fUBOU-rFKrlvIQwiU" /> 

    <!-- General metadata -->
    <meta name="generator" content="" />
    <meta name="robots" content="index,follow" />
    <meta name="revisit-after" content="2 days" />
    <meta name="Author-Template" content="" />
    <meta name="Author" content="Benjamin Blundell" />
    <meta name="Publisher" content="Benjamin Blundell" />
    <meta name="Publisher-Email" content="ben@section9.co.uk" />
    <meta name="Coverage" content="UK" /> 

    <!-- Dublin Core Metadata -->
    <meta name="DC.creator" lang="en" content="Benjamin Blundell" />
    <meta name="DC.date.created" lang="en" content="" />
    <meta name="DC.format" lang="en" content="text/html" />
    <meta name="DC.language" content="en" />
    <meta name="DC.publisher" lang="en" content="Benjamin Blundell" />
    <meta name="DC.rights.copyright" lang="en" content="Benjamin Blundell" />
    <meta name="DC.coverage" lang="en" content="" />
    <meta name="DC.identifier" content="" />    

    <!-- eGMS Metadata -->
    <meta name="eGMS.status" lang="en" content="V1.0 Public Consumption" />

    <meta name="Keywords" content="opengl, webgl, coffeescript, git, hpc, kinect, opengl, cinder,openframeworks, cpp, c++, programming, graphics, art, design, code" />
    <meta name="Description" content="Benjamin Blundell, section9 dot co dot uk, the home of Benjamin Blundell. I make things with computers"/>
    <meta name="DC.title" lang="en" content="section9 dot co dot uk - Benjamin Blundell" />
    <meta name="DC.description" lang="en" content="" />
    <meta name="DC.subject" lang="en" content="" /> 

    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/skrollr.min.js"></script>


  </head>

  <body>

    <nav class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <img class="navbar-brand-image" src="/images/s9_tiny.png" alt="section9 logo" />

          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/index.html">Benjamin J. Blundell</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li ><a href="/index.html">Home</a></li>
            <li ><a href="/blog.html">Blog</a></li>
            

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">Professional Work <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/posts/2014-12-21-Utopia.html">UTOPIA Bio-informatics Toolkit</a></li>
                
                
                
                
                
                
                <li><a href="/posts/2014-12-12-Bullseye.html">Bullseye's playground for Target and Psyop</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/posts/2014-09-26-Echo-Forms-Live-Gig.html">Echoforms at Lexus NX Launch</a></li>
                
                
                
                
                
                
                <li><a href="/posts/2014-09-06-900-Pixel-Screen.html">900 RGB LED Screen</a></li>
                
                
                
                
                
                
                
                
                <li><a href="/posts/2014-07-28-Kaleidoscope.html">Kaleidoscope for Lexus</a></li>
                
                
                
                
                
                
                <li><a href="/posts/2014-05-28-Equatorie.html">The Equatorie</a></li>
                
                
                
                
                
                
                
                
                <li><a href="/posts/2014-02-13-Phantom-Limb-Oculus.html">Oculus Rift, meet Phantom Limb Therapy</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/posts/2013-08-06-Photorealistic-Hands.html">Photo-realistic hands</a></li>
                
                
                
                
                
                
                <li><a href="/posts/2013-07-12-BurberryKisses.html">Burberry Kisses, with Google and Grow Interactive</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/posts/2013-04-08-Museum-of-Rural-Life.html">Museum of Rural Life Smart Audio Guide</a></li>
                
                
                
                
                
                
                
                
                <li><a href="/posts/2013-02-18-BritishMuseumCoins.html">Coin Detection at the British Museum</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="/posts/2012-11-19-The-Carp-and-the-Seagull.html">The Carp and the Seagull</a></li>
                
                
                <li class="divider"></li>
                <li><a href="/work.html">...and more!</a></li>

              </ul>
            </li>

            <li class="dropdown">
              <a href="/work.html" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">Fun Experiments <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">



                <li><a href="http://archive.section9.co.uk/transsib">Transsiberian Slitscan</a></li>
                <li><a href="http://archive.section9.co.uk/asteroids">Asteroids</a></li>
                <li><a href="http://echoforms.section9.co.uk/">EchoForms</a></li>
                <li><a href="http://archive.section9.co.uk/amiga/">Amiga Bouncing Ball</a></li>


              </ul>
            </li>

            <li ><a href="/about.html">About</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="jumbotron">
      <div class="container">
        <h2>The Equatorie</h2>
        <h3>28-05-2014</h3>
        <p>Re-creating an historical artifact that never was</p>
      </div>
    </div>

    <div class ="container" id="content">
      <div class="col-md-9">

        
<p><img alt="Equatorie" src="https://farm4.staticflickr.com/3721/14110784829_490a1dd725.jpg" /></p>
<p>It's often been said that the best ideas happen in pubs. Being slightly inebriated and talking with people you like helps form ideas and makes things happen. This project starts with me attempting to learn Middle-English in a pub by speaking it aloud, like a child would, syllable by syllable, while an eminent historian giggles. Im excited because I'm a space nerd and there is computer graphics space programming to be done!</p>
<p>The Equatorie can be considered a sister instrument to the <a href="https://en.wikipedia.org/wiki/Astrolabe">astrolabe</a>. Unlike the astrolabe however, the Equatorie measures the location of the planets as oppose the stars and constellations. It was thought to be first mentioned by <a href="https://en.wikipedia.org/wiki/Chaucer">Chaucer</a>, though this is now considered unlikely. The original design is based somewhat on <a href="https://en.wikipedia.org/wiki/Ptolemy#Astrology">Ptolemaic</a> theory, the classic <a href="https://en.wikipedia.org/wiki/Epicycles">Epicycles upon epicycles</a> approach. </p>
<p>I was approached by <a href="http://www.hps.cam.ac.uk/whipple/">The Whipple Museum</a> at the University of Cambridge to help build a 3D representation of the Equatorie as part of the digitisation of the original manuscript. I was teamed up with a lovely historian <a href="http://astrolabesandstuff.blogspot.co.uk/">Seb Falk</a>, who you may have seen running the London Marathon as the London Gherkin. Together, we got cracking.</p>
<p>Seb had already made quite a lot of head-way in working out how the device was supposed to operate. Digging around the museum stores, he had managed to find a model of the Equatorie, created in the 1950's by a chap called <a href="http://astrolabesandstuff.blogspot.co.uk/">Price</a>, who wrote about the Equatorie at great length. This giant model is quite difficult to use and indeed, would not have been possible to build in the 13th century. Seb set about re-creating <a href="">his own version in MDF</a>, getting a better understanding of the operation in the process, including correcting some inaccuracies in Price's original model.</p>
<p>With the instructions in place, I set to, with some <a href="http://www.coffeegl.com">CoffeeGL</a>. I'd decided, early on, that this was the perfect opportunity to try and get my own WebGL libraries into shape. I'd toyed with the idea before but hadn't really had a compelling reason, aside from learning. I've used other popular WebGL libraries and simply hadn't seen any point as they never scratched the learning itch I've had.</p>
<div class="clearfix"></div>

<p><img alt="Equatorie Detail" src="https://farm3.staticflickr.com/2915/14110831308_76595e725d.jpg" /></p>
<p>The Equatorie is made of a few small parts, each with interesting challenges that are not immediately obvious. The main sections are the base, the label, the epicycle and the two strings. The base has a movable plate mounted in the center and there are several markings on all the major elements. This presents the first problem; scale. In the original object, scale is a major issue. It's quite hard to maneuver a large piece of brass accurately and depending on how small and taut your string is, you'll have trouble taking accurate readings. Scale is still an issue with the virtual model. You'll need a texture that looks good up close and far away, with potentially quite large gaps of 'not very much' in between the areas of interest.</p>
<div class="clearfix"></div>

<p><hr />
<iframe width="480" height="360" src="https://www.youtube.com/embed/DObdY0FYISE" frameborder="0" allowfullscreen></iframe>
<div class="clearfix"></div>
<hr /></p>
<p>The next challenge are the two strings. Critical to the operation of the Equatorie are the two strings that allow for measurement. They are attached to two pins that are placed in the various holes on the center plate, the epicycle and elsewhere. Originally, I had modeled these in <a href="https://github.com/kripken/ammo.js/">ammo.js</a>, an llvm port of <a href="http://bulletphysics.org/wordpress/">bullet physics</a>. I didn't have a lot of luck with this method though as ammo.js tended to explode and crash. Thankfully, the wonderful Schteppe and his <a href="http://www.cannonjs.org/">Canon.js</a> saved the day. Modeling the strings turned out to be straight forward and one can get the idea across quite easily.</p>
<p><img alt="Equatorie Detail" src="https://farm4.staticflickr.com/3719/14110926617_7b9ae2508e.jpg" /></p>
<p>Modelling the larger, static components was an interesting challenge. I stuck decided to use Blender as it's my favorite of all the 3D packages these days. Exporting from Blender to a json format is quite simple (in the future, I'll be using a compressed, binary format instead) and allows easy import into coffeegl. The textures were created, by hand, with the GIMP and the bumpmaps generated with <a href="http://www.crazybump.com/">CrazyBump</a> (which I think is still magical!). Going it alone and writing my own WebGL library did incur an initial time penalty but towards the end of the project, it proved to be the right decision, allowing for first changes and updates.</p>
<p>Graphically, the build is fairly simple, using a basic <a href="https://en.wikipedia.org/wiki/Phong_shading">Phong</a> lighting solution, coupled with a bump map and an <a href="https://en.wikipedia.org/wiki/Anisotropy">Anisotropic</a> shader function, to give the lovely brass and polished wood effects. My only regret is not having enough time to photograph the Whipple Museum itself to create a reflection map for the metal sections. Maybe next time. I had used a small amount of <a href="https://en.wikipedia.org/wiki/Screen_Space_Ambient_Occlusion">SSAO</a> for some extra depth but it turned out to be too costly for the effect to be worthwhile.</p>
<p>One final challenge remained - an installation inside the museum itself. The museum wanted to mount a version next to both Price's and Seb's models. I decided that the best option was to run the site on the Google Nexus 10. Chrome supports WebGL (yay!) and that made it the ideal solution. It did present a few challenges however; the user interaction being the chief concern! Using a mouse and keyboard is quite different to how touch screens work and you certainly aren't given any handy gestures like <em>pinch</em> or <em>two-finger-swipe</em> so one needs to program these in too.</p>
<p>As a computer scientist (or indeed, any scientist) not being able to test or verify is very disconcerting. I am told, by historians, that the notion of a <em>ground-truth</em> is very bad history, which I understand but really dislike. So I set about comparing the equatorie to <a href="http://ssd.jpl.nasa.gov/?horizons">NASA's Horizons Ephimerides</a>. Using telnet, one can log into the Horizons system and find the positions of all the celestial objects (and satellites!) with a few key presses. Its marvelous! Turns out the Equatorie is really quite accurate. </p>
<p><img alt="Equatorie in Action" src="https://farm6.staticflickr.com/5591/14297481225_a060eee5fb.jpg" /></p>
<p>There are a couple of important and related points to make about this project. Firstly, I did it my way, as the song goes. I'd made the decision to write my own library, setup my own tools (with the help of <a href="http://nodejs.org/">node.js</a>, <a href="http://browserify.org/">browserify</a> and <a href="http://www.cannonjs.org/">Canon.js</a>) and work how I wanted to work. Part of the reason I do what I do is I get to work how I believe I should work. Agency over one's work is really important, especially these days. It's a piece of work I can stand against and say, yes, this is good. I am happy to show this to anyone and let it stand on it's own merits.</p>
<div class="clearfix"></div>

<p><img alt="Equatorie in Action" src="https://farm4.staticflickr.com/3711/14296916024_fa62d29c95.jpg" /></p>
<p>I feel that this is one of the best uses of WebGL. It recreates an object that didn't exist and therefore allows historians to perform more research. Because it's on the Web the public can get a feel for how the device works. The whole thing has a wonderful educational and academic appeal, unlike many of the WebGL sites out there which tend to be either amazing technical pieces at best, or poor advertising at worst.</p>
<p>The second point is that we are obsessed these days with collaboration, sharing, open-source and such. I've never been one for working in large teams of programmers - major players like John Carmack seem to agree. Working with <a href="http://www.memo.tv/">Memo Akten</a> was amazing and I learned so much from him, as a programmer, but this kind of thing is rare. I personally think the best collaborations are ones where people can get support but are allowed to work to their best with their skills and are given the responsibility to see their end done. <a href="http://astrolabesandstuff.blogspot.co.uk/">Seb Falk</a> is an amazing historian who worked really hard on the maths behind the equatorie and respected my opinions on the build and trusted me to get the job done. Its a pleasure to work with people who are experts in their fields and love what they do. Our skills are complimentary but our passion for the project was shared and I think that is the key to good collaboration.</p>
<p>You can see the original manuscript and the new model at <a href="http://cudl.lib.cam.ac.uk/view/MS-PETERHOUSE-00075-00001/3">The Cambridge Digital Library - Peterhouse Equatorie Manuscript</a></p>
      </div>

      <div class="col-md-3">
        <ul class="list-unstyled">
          
          <li><a href="/posts/2010-07-20-animation10.html">Animation10</a></li>
          
          <li><a href="/posts/2010-10-15-british-library-tweet-o-meter.html">British Library Tweet-o-meter</a></li>
          
          <li><a href="/posts/2011-04-13-the-woes-of-soft-shadows.html">The Woes of Soft Shadows</a></li>
          
          <li><a href="/posts/2011-05-24-My-First-Big-Thing-Deutsche-Bank.html">Deutsche Bank Installation</a></li>
          
          <li><a href="/posts/2011-06-15-only.html">Only Installation at the Lowry</a></li>
          
          <li><a href="/posts/2011-11-09-Smiling-Film-Student-Geekery.html">Smiling-Film-Student-Geekery</a></li>
          
          <li><a href="/posts/2011-12-05-Lowry-to-Life.html">Lowry to Life</a></li>
          
          <li><a href="/posts/2012-02-3-Phantom-Limb.html">Phantom Limb Pain</a></li>
          
          <li><a href="/posts/2012-08-10-Boom-Box.html">Animation12 - The Boom Box!</a></li>
          
          <li><a href="/posts/2012-08-17-Organ-Reconstruction.html">3D Organ Reconstruction</a></li>
          
          <li><a href="/posts/2012-11-19-The-Carp-and-the-Seagull.html">The Carp and the Seagull</a></li>
          
          <li><a href="/posts/2013-02-18-BritishMuseumCoins.html">Coin Detection at the British Museum</a></li>
          
          <li><a href="/posts/2013-04-08-Museum-of-Rural-Life.html">Museum of Rural Life Smart Audio Guide</a></li>
          
          <li><a href="/posts/2013-07-12-BurberryKisses.html">Burberry Kisses, with Google and Grow Interactive</a></li>
          
          <li><a href="/posts/2013-08-06-Photorealistic-Hands.html">Photo-realistic hands</a></li>
          
          <li><a href="/posts/2013-11-25-Phantom-Limb-01.html">Phantom Limb Dev Diary Part 1</a></li>
          
          <li><a href="/posts/2014-01-12-Phantom-Limb-02.html">Phantom Limb Dev Diary Part 2</a></li>
          
          <li><a href="/posts/2014-01-28-Phantom-Limb-03.html">Phantom Limb Dev Diary Part 3</a></li>
          
          <li><a href="/posts/2014-02-05-Phantom-Limb-04.html">Phantom Limb Dev Diary Part 4</a></li>
          
          <li><a href="/posts/2014-02-13-Phantom-Limb-Oculus.html">Oculus Rift, meet Phantom Limb Therapy</a></li>
          
          <li><a href="/posts/2014-07-28-Kaleidoscope.html">Kaleidoscope for Lexus</a></li>
          
          <li><a href="/posts/2014-09-26-Echo-Forms-Live-Gig.html">Echoforms at Lexus NX Launch</a></li>
          
          <li><a href="/posts/2014-12-12-Bullseye.html">Bullseye's playground for Target and Psyop</a></li>
          
          <li><a href="/posts/2014-12-21-Utopia.html">UTOPIA Bio-informatics Toolkit</a></li>
          
          <li><a href="/posts/2014-12-30-Tetris.html">Giant Tetris on a building; RI Xmas Lectures</a></li>
          
          <li><a href="/posts/2015-07-06-r2ks.html">R2kS - A Novel Measure for Comparing Gene Expression Based on Ranked Gene Lists</a></li>
          
          <li><a href="/posts/2015-07-16-daresbury.html">High Performance Computing at Daresbury</a></li>
          
          <li><a href="/posts/2011-08-14-Denied.html">Denied</a></li>
          
        </ul>
      </div>


    </div>


    <footer>

      <div class="container">
        <div class="row">
          <div class="col-md-4">
            <h3>Ghost in the CSh</h3>
            <p>© Benjamin J. Blundell 2015 - <a style="color: white" title="Share &amp; Enjoy — CC-BY" href="https://creativecommons.org/licenses/by/3.0/">CC-BY</a> <a href="/atom.xml" title="RSS"><i class="fa fa-rss"></i></a></p>

          </div>
          <div class="col-md-4">
            <h3>Other places</h3>
            <p class="places-icons">
              <a href="https://github.com/OniDaito" title="GitHub"><i class="fa fa-github"></i></a>
              <a href="http://stackoverflow.com/users/104324/oni" title="Stack-Overflow"><i class="fa fa-stack-overflow"></i></a>
              <a href="https://www.flickr.com/photos/section9/" title="Flickr"><i class="fa fa-flickr"></i></a>
              <a href="https://www.youtube.com/user/onidaito/videos" title="Youtube"><i class="fa fa-youtube"></i></a>
              <a href="https://vimeo.com/user1678273/videos" title="Vimeo"><i class="fa fa-vimeo-square"></i></a>
            </p>
          </div>
          <div class="col-md-4">
            <h3>Contact</h3>
            <p class="places-icons">
             <a href="http://www.twitter.com/secti0n9" title="Twitter"><i class="fa fa-twitter"></i></a>
             <a href="mailto:ben@section9.co.uk" title="Email"><i class="fa fa-envelope-square"></i></a>
             <a href="https://uk.linkedin.com/in/section9" title="LinkedIn"><i class="fa fa-linkedin"></i></a>
             <a href="https://plus.google.com/u/0/+BenjaminBlundell/posts" title="Google Plus"><i class="fa fa-google-plus"></i></a>
             <a href="/key.html" title="GPG Key"><i class="fa fa-lock"></i></a>
           </p>
         </div>
       </div>


     </footer>
   </div>


  <script type="text/javascript">
    $(window).load(function(){

    // Process all images in the post for  left / right align
    var images = $("#content img");
    for(var i = 0; i < images.length; i++) {
      if (i % 2 == 0){
        $(images[i]).addClass("img-responsive img-thumbnail pull-left");
      } else {
        $(images[i]).addClass("img-responsive img-thumbnail pull-right");
      }
    }
  });
  </script>

  </body>
</html>

