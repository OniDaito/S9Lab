<!DOCTYPE html>
<!--
                      __  .__              ________ 
  ______ ____   _____/  |_|__| ____   ____/   __   \
 /  ___// __ \_/ ___\   __\  |/  _ \ /    \____    /
 \___ \\  ___/\  \___|  | |  (  <_> )   |  \ /    / 
/____  >\___  >\___  >__| |__|\____/|___|  //____/ .co.uk 
     \/     \/     \/                    \/        
   -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-gb" class="skrollr skrollr-desktop">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Oculus Rift, meet Phantom Limb Therapy</title>
    <meta name="author" content="Benjamin Blundell" />
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Section9 ATOM Feed">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <link href="/css/bootstrap.css" rel="stylesheet">
    <link href="/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/css/s9.css" rel="stylesheet" media="screen">
    <link href="/css/font-awesome.min.css" rel="stylesheet" media="screen">


    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/s9-144.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/s9-114.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/s9-72.png">
    <link rel="apple-touch-icon-precomposed" href="/images/s9-57.png">
    <link rel="shortcut icon" href="/images/favicon.ico">

    <!-- META DATA - Need to Check and Update -->
    <meta name="google-site-verification" content="Ew7bGq_-B5Djz3nNvxYt6abpW2fUBOU-rFKrlvIQwiU" /> 

    <!-- General metadata -->
    <meta name="generator" content="" />
    <meta name="robots" content="index,follow" />
    <meta name="revisit-after" content="2 days" />
    <meta name="Author-Template" content="" />
    <meta name="Author" content="Benjamin Blundell" />
    <meta name="Publisher" content="Benjamin Blundell" />
    <meta name="Publisher-Email" content="ben@section9.co.uk" />
    <meta name="Coverage" content="UK" /> 

    <!-- Dublin Core Metadata -->
    <meta name="DC.creator" lang="en" content="Benjamin Blundell" />
    <meta name="DC.date.created" lang="en" content="" />
    <meta name="DC.format" lang="en" content="text/html" />
    <meta name="DC.language" content="en" />
    <meta name="DC.publisher" lang="en" content="Benjamin Blundell" />
    <meta name="DC.rights.copyright" lang="en" content="Benjamin Blundell" />
    <meta name="DC.coverage" lang="en" content="" />
    <meta name="DC.identifier" content="" />    

    <!-- eGMS Metadata -->
    <meta name="eGMS.status" lang="en" content="V1.0 Public Consumption" />

    <meta name="Keywords" content="opengl, webgl, coffeescript, git, hpc, kinect, opengl, cinder,openframeworks, cpp, c++, programming, graphics, art, design, code" />
    <meta name="Description" content="Benjamin Blundell, section9 dot co dot uk, the home of Benjamin Blundell. I make things with computers"/>
    <meta name="DC.title" lang="en" content="section9 dot co dot uk - Benjamin Blundell" />
    <meta name="DC.description" lang="en" content="" />
    <meta name="DC.subject" lang="en" content="" /> 

    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/skrollr.min.js"></script>


  </head>

  <body>

    <nav class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <img class="navbar-brand-image" src="/images/s9black_small.png" alt="section9 logo" />

          
          <a class="navbar-brand" href="/index.html">Benjamin J. Blundell</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
         
          
        </div>
      </div>
    </nav>

     
    <div class ="container post" id="content">
      <div class="col-md-12">

        <h3>Oculus Rift, meet Phantom Limb Therapy</h3>
        <h4>13-02-2014</h4>
        
<p><img alt="Mark 3 PLP" src="https://31.media.tumblr.com/fa7b1bdbd7cb6c6b0f1ea0749d2caa73/tumblr_inline_n0bszbITiI1rjqjsc.jpg" /></p>
<p>Working with the University of Manchester, I built a 3D engine that combines the oculus rift, the asus xtion and the MD5 Model format attempting to treat sufferers of <a href="http://en.wikipedia.org/wiki/Phantom_limb">Phantom Limb Pain</a>. This is version 3 of the project and is the best yet, thanks largely to the Oculus Rift.</p>
<p>The general idea is simple. The mirror box has been shown to affect patients in a positive way. The patient places their remaining limb (their left arm, say) into the mirror box. They can then see a reflection of their arm where their missing right arm should be. By performing a set of exercises, studies have shown this can have a beneficial effect. </p>
<div class="clearfix"></div>

<hr/>

<iframe width="560" height="315" src="https://www.youtube.com/embed/RSL_a4EVBTQ" frameborder="0" allowfullscreen></iframe>

<div class="clearfix"></div>

<hr/>

<p><img alt="Early PLP" src="http://aig.cs.man.ac.uk/research/phantomlimb/plp.png" /></p>
<p>Using VR, we can do more than just mirror the limb. We can copy the position (so moving the real arm left moves the virtual one left), we can create a set of games rather than just boring exercises and we can easily mirror the legs as well as the arms. In addition, we can change various parameters to investigate what works for each individual.</p>
<p>The early work used old VR helmets and a set of tracking devices similar to the ping-pong ball trackers, and amusingly, a sort of power glove.</p>
<p>The problem was the VR wasn't good enough and the kit difficult to use. It required special setup and the headset was much too heavy.</p>
<p>Version 2 used the Vuzix headset some tracking software I built using XBee Radios. Vuzix were not very forthcoming in supporting Linux or OSX so custom head-tracking hardware was needed. It was around the time the Kinect came about, which allowed us to track the user much more easily. The project was deemed interesting enough to feature at the UK Science Museum:</p>
<div class="clearfix"></div>

<p><hr/>
<iframe width="560" height="315" src="https://www.youtube.com/embed/1r-JCQ-4CcU" frameborder="0" allowfullscreen></iframe>
<div class="clearfix"></div>
<hr/></p>
<p>When the Oculus was announced, we were very excited because it means we can create something we can actually give to clinics and non-computer health care professionals to actually take to people and use. Thus began Phantom Limb Mark3</p>
<p>This is me, playing the game on delivery day. The game itself is quite simple. Balls are fired at you and you have to bat them away with whichever arm you have. It's quite good fun!</p>
<div class="clearfix"></div>

<p>Technically, the code is quite simple. I wrote my own 3D library / framework in the style of LibCinder (implicit shared objects with C++), with my own MD5 and OBJ parsers. I used Blender to modify some stock models from Turbosquid and Blendswap. MD5 supports bone animation (which is what we need for this to work, as oppose to morph targets or similar) and is a simple and elegant format. Previously, I'd used FBX which is good as it provides for everything but can be overkill and the libraries are quite chunky. GLFW provides the window manger, with GTK+ giving a very simple gui. </p>
<p>Bullet Physics v3 is used to model the balls flying around. I'm quite a fan of bullet; it's so much fun to play with! The skinning uses code I wrote myself. Using blender, I create a basic skin and rig, export to MD5 format and import the mesh into my program. Skinning is performed using a maximum of 4 bones on the GPU with a vertex shader. Oculus distortion takes place with an FBO, geometry and fragment shader. Calibrating the model takes place in Blender. I suspect this will move into the application itself at some point.</p>
<p>OpenNI2 and an Asus Xtion Pro are tracking my arms. OpenNI2 is vastly improved over version 1. Version 1 had one problem initially in that you had to stand in the PSI pose in order to calibrate your user. This is... somewhat tricky if you only have one arm! :S Thankfully, this requirement has been removed and tracking is much smoother.</p>
<p><hr/>
<iframe width="480" height="360" src="https://www.youtube.com/embed/APkMj9h8D-k" frameborder="0" allowfullscreen></iframe>
<div class="clearfix"></div>
<hr/></p>
<p>I'm using a touchscreen LCD to show some simple options. The whole thing runs on Lubuntu quite happily. One reason I decided to write all this from scratch is that OpenFrameworks is the only viable framework for 3D graphics under Linux and besides, I've been keen to write my own engine for years! :) The cost of the PC and graphics card was quite low; one of the goals should this ever end up with the NHS!</p>
<p>The graphics are quite simple; this is by design and also restricted by the time I had to spend and the funding available. We aren't sure yet whether-or-not a highly detailed scene would be better, or a simple one. Perhaps an Augmented Reality approach would be better? At present, these are open questions.</p>
<p>I've been keeping a diary of my approaches and taking videos at every stage, over at <a href="http://phantomlimbmanchester.tumblr.com/">http://phantomlimbmanchester.tumblr.com/</a></p>
<p>There were quite a few challenges; most notably being the skinning. I'm still not convinced the stereo warping is correct (you only really get the stereo effect up close) but overall, it works and is robust and ready for its first outing. We are waiting with baited breath for the first results from using the system with real life patients.</p>
<p>Mark 3 is the most exciting version because, unlike the previous incarnations, this one is heading to an actual clinic to begin clinical trials. So thank-you Oculus. I hope you feel the same warm fuzzies as I do as your gear is helping people out with real problems!</p>
      </div>

     
    </div>
    
    <hr />

    <footer>

      <div class="container">
        <div class="row">
          <div class="col-md-4 col-sm-4 col-lg-4">
            <p>© Benjamin J. Blundell 2015 - <a title="Share &amp; Enjoy — CC-BY" href="https://creativecommons.org/licenses/by/3.0/">CC-BY</a> <a href="/atom.xml" title="RSS"><i class="fa fa-rss"></i></a></p>

          </div>
          <div class="col-md-4 col-sm-4 col-lg-4">
            <p class="places-icons">
              <a href="https://github.com/OniDaito" title="GitHub"><i class="fa fa-github"></i></a>
              <a href="http://stackoverflow.com/users/104324/oni" title="Stack-Overflow"><i class="fa fa-stack-overflow"></i></a>
              <a href="https://www.flickr.com/photos/section9/" title="Flickr"><i class="fa fa-flickr"></i></a>
              <a href="https://www.youtube.com/user/onidaito/videos" title="Youtube"><i class="fa fa-youtube"></i></a>
              <a href="https://vimeo.com/user1678273/videos" title="Vimeo"><i class="fa fa-vimeo-square"></i></a>
            </p>
          </div>
          <div class="col-md-4 col-sm-4 col-lg-4">
            <p class="places-icons">
             <a href="http://www.twitter.com/secti0n9" title="Twitter"><i class="fa fa-twitter"></i></a>
             <a href="mailto:ben@section9.co.uk" title="Email"><i class="fa fa-envelope-square"></i></a>
             <a href="https://uk.linkedin.com/in/section9" title="LinkedIn"><i class="fa fa-linkedin"></i></a>
             <a href="https://plus.google.com/u/0/+BenjaminBlundell/posts" title="Google Plus"><i class="fa fa-google-plus"></i></a>
             <a href="/key.html" title="GPG Key"><i class="fa fa-lock"></i></a>
           </p>
         </div>
       </div>


     </footer>
   </div>

  <script type="text/javascript">
    $(window).load(function(){

    // Process all images in the post for  left / right align
    var images = $(".post img");
    for(var i = 0; i < images.length; i++) {
     
      $(images[i]).addClass("img-responsive");
      $(images[i]).attr("align","middle");
    
    }
  });
  </script>

  </body>
</html>

