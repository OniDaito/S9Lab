<!DOCTYPE html>
<!--
                      __  .__              ________ 
  ______ ____   _____/  |_|__| ____   ____/   __   \
 /  ___// __ \_/ ___\   __\  |/  _ \ /    \____    /
 \___ \\  ___/\  \___|  | |  (  <_> )   |  \ /    / 
/____  >\___  >\___  >__| |__|\____/|___|  //____/ .co.uk 
     \/     \/     \/                    \/        
-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-gb" class="skrollr skrollr-desktop">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>Cinder Shadow Volumes</title>
  <meta name="author" content="Benjamin Blundell" />
  <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Section9 ATOM Feed">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


  <link href="/css/bootstrap.css" rel="stylesheet">
  <link href="/css/bootstrap-responsive.css" rel="stylesheet">
  <link href="/css/s9.css" rel="stylesheet" media="screen">

  <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <!-- Fav and touch icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/s9-144.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/s9-114.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/s9-72.png">
  <link rel="apple-touch-icon-precomposed" href="/images/s9-57.png">
  <link rel="shortcut icon" href="/images/favicon.ico">

  <!-- META DATA - Need to Check and Update -->
  <meta name="google-site-verification" content="Ew7bGq_-B5Djz3nNvxYt6abpW2fUBOU-rFKrlvIQwiU" /> 

  <!-- General metadata -->
  <meta name="generator" content="" />
  <meta name="robots" content="index,follow" />
  <meta name="revisit-after" content="2 days" />
  <meta name="Author-Template" content="" />
  <meta name="Author" content="Benjamin Blundell" />
  <meta name="Publisher" content="Benjamin Blundell" />
  <meta name="Publisher-Email" content="oni@section9.co.uk" />
  <meta name="Coverage" content="UK" /> 

  <!-- Dublin Core Metadata -->
  <meta name="DC.creator" lang="en" content="Benjamin Blundell" />
  <meta name="DC.date.created" lang="en" content="" />
  <meta name="DC.format" lang="en" content="text/html" />
  <meta name="DC.language" content="en" />
  <meta name="DC.publisher" lang="en" content="Benjamin Blundell" />
  <meta name="DC.rights.copyright" lang="en" content="Benjamin Blundell" />
  <meta name="DC.coverage" lang="en" content="" />
  <meta name="DC.identifier" content="" />    
  
  <!-- eGMS Metadata -->
  <meta name="eGMS.status" lang="en" content="V1.0 Public Consumption" />
  
  <meta name="Keywords" content="creative technologist,webgl, coffeescript, git, kinect,opengl,cinder,openframeworks,cpp,c++,programming,graphics,art,design,code" />
  <meta name="Description" content="Benjamin Blundell, section9 dot co dot uk ltd, the home of Benjamin Blundell. I create with WebGL, Nodejs, Javascript, C++, OpenFrameworks and Cinder amongst many other things." />
  <meta name="DC.title" lang="en" content="section9 dot co dot uk ltd - Home of Creative Technologist Benjamin Blundell" />
  <meta name="DC.description" lang="en" content="" />
  <meta name="DC.subject" lang="en" content="" /> 

  <script src="/js/jquery.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/skrollr.min.js"></script>


</head>

<body>

<div id= "skrollr-body">


  <!-- nice background WebGL Stuff goes here -->
  <div class="jumbotron">
    <div id="page-title">
      <h2> Cinder Shadow Volumes - 2010-12-21 00:00:00 </h2>
    </div>
    <div id="scenery">
      <img src="/images/strap/deutsche.jpg" />
    </div>
  </div>


  <div class="navbar navbar-inverse skrollable skrollable-between" data-0="background-color:rgba(0,0,0,0);border-bottom:1px solid rgba(255, 255, 255, 0.33); box-shadow: 0 0 0px;" data-200="background-color:rgba(29, 21, 21, 0.94);border-bottom:1px solid rgba(53, 53, 53, 1); box-shadow: 0 0 15px;" style="border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgba(154, 154, 154, 0.666667); -webkit-box-shadow: 0px 0px 7.5px; box-shadow: 0px 0px 7.5px; background-color: rgba(14, 10, 10, 0.470588);">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#"><img src="/images/s9-57.png" alt="Section9 Logo"/></a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>



  <!--
   <div class="container">
      <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="brand" href="http://www.section9.co.uk"><img class="brand" src = "/images/s9black.png" alt="section9 dot co dot uk ltd" /></a>
      <a class="brand" href="#" id="companyname">section9 dot co dot uk</a>

      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav pull-right">
          <li ><a href="/index.html">Home</a></li>
          <li ><a href="/work.html">Work</a></li>
          <li ><a href="/about.html">About</a></li>
          <li ><a href="/contact.html">Contact</a></li>
          <li ><a href="/blog.html">Blog</a></li>
        </ul>
      </div>
    </div> -->

  <div class="content skrollable skrollable-between" data-0="top:0px;" data-75p="top:-200px;" style="top: -29.9289188178077px;">

    <!--<div class="container" id="title">
      <div class="col-md-8"><p class="highlight toppad">Cinder Shadow Volumes - 2010-12-21 00:00:00</p></div><div class ="clear"></div>
    </div> -->


    <hr class="tight_hr"/>
    <div class="container">

      <div class="col-md-9">
    
      
<p><img alt="shadows" src="http://4.bp.blogspot.com/_WNXP2eEZSdg/TRDT5e0crCI/AAAAAAAAAw8/iYnYGi-neIE/s1600/shadow1.jpg" /></p>
<p>I was asked to come up with some shadows in Openframeworks on a tight timescale.... I kinda failed on that one, having gone down the wrong route of shadow maps (I'd previously used VSM for my first NIN project). Looking it over, it seems that shadow volumes, or some hybrid approach with both is probably best. I've spent far too long on this but so far, I've managed to get a reasonable approximation of depth pass shadow volumes going.</p>
<p>I first wanted to use <a href="http://http.developer.nvidia.com/GPUGems3/gpugems3_ch11.html">this approach from GPU Gems 3</a> whereby a geometry shader creates the shadow volume on the card and 'hopefully' speeds things up. This means you need to create a <a href="http://www.cgal.org/Manual/latest/doc_html/cgal_manual/HalfedgeDS/Chapter_main.html">Half-edge</a> structure that knows about twin edges so you can pass adjacency information to the geometry shader using GL_TRIANGLES_ADJACENY_EXT.</p>
<p>Theres just one problem</p>
<p>OSX only has shader language 1.2 (at least on snow leopard). This means I can't implement the algorithm in GPU Gems. Bugger!</p>
<p>I'd gone down this road stupidly really, but I'd spent a lot of time with <a href="http://code.google.com/p/google-sparsehash/">Google Sparse Hash</a> in trying to get a fast lookup. I figure'd I'd stick with this half-edge structure (built from Cinder's Trimesh) and carry on using the default method of creating shadow volumes with the stencil buffer. This means no shaders sadly but nevermind. </p>
<p>Again, another unforseen problem. Cinder on OSX doesn't create a stencil buffer by default! </p>
<p>Yup, that kinda sucks really as they are quite handy though Im sure there were reasons for this. The changes are up on <a href="https://github.com/cinder/Cinder/issuesissue/21">the Github Cinder repository</a> if you use OSX. Not sure about Windows though but potentially, there is an issue there too.</p>
<p>The main problem I've had is with creating the silhouette itself. This can be quite tricky and since I'm using Cinder's TriMesh, I need to make the code as unobtrusive as possible. <a href="http://prideout.net/blog/?p=54">This page</a> gives a great guide to doing this and the general approach is quite useful. One needs to find the edges facing away or towards the light, discount all the others then find edges with twin faces that arent counted. These form the edges which we then extrude away from the light. </p>
<p>Overall I'm fairly pleased with the result, though it needs improvement. Depth fail + Caps and a slight softening of the edges in the GPU should work I think</p>
        
      </div>

      <div class="col-md-3">
        <h4>Related Posts</h4>
        <ul class="list-unstyled">
        
        </ul>
      </div>

    <p class="clear"></p>
      <hr />
      <footer>
        <p><ul><li> <a href="http://www.section9.co.uk/atom.xml">rss atom feed</a></li><li><a href="http://www.section9.co.uk/key.html">public gnupg key</a></li></p>
      </footer>
    </div>
  </div>


</div>

<script type="text/javascript">
  $(window).load(function(){

    // Process all images in the post for  left / right align
    var images = $(".content img");
    for(var i = 0; i < images.length; i++) {
      if (i % 2 == 0){
        $(images[i]).addClass("left");
      } else {
        $(images[i]).addClass("right");
      }
    }
  });
</script>


<script type="text/javascript">
  var s = skrollr.init();
</script>

<!--
<script type="text/javascript">
  $(window).load(function(){

    // Process p code blocks

    $("#blogblocks p > code").each(function (i,e) {
      $(e).parent().replaceWith(e);
      $(e).wrap("<div class='blogvideo'><div>")
    });


    // Process 'objects' next

    $("#blogblocks p > object").each(function (i,e) {
      $(e).parent().replaceWith(e);
    });
    

    $('#blogblocks p').wrap("<div class='span3 blogblock'></div>");

    var divs = $("#blogblocks .blogblock");
    for(var i = 0; i < divs.length; i+=4) {
      divs.slice(i, i+4).wrapAll("<div class='row-fluid'></div>");
    }

    $('#blogblocks .row-fluid').each (function (i,e) {
     $(e).after('<hr />');
    });

    $("#blogblocks iframe").wrap("<div class='blogvideo'><div>")
    $("#blogblocks object").wrap("<div class='blogvideo'><div>")


    $("#blogblocks .blogvideo").each(function(i,e){
      $(e).after('<hr />');

    });

    // Process all images in the post to add light boxes
    var images = $("#blogblocks img");
    for(var i = 0; i < images.length; i++) {
      $(images[i]).wrap("<a href='" + $(images[i]).attr("src") + "'></a>");
    }

  });

</script> -->


</body>
</html>

